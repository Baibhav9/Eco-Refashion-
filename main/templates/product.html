{% extends 'base.html' %}
{% load static %}

{% block title %}Products - ECO Refashion{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'base.css' %}">
<link rel="stylesheet" href="{% static 'product.css' %}">
{% endblock %}

{% block content %}
<!-- Top Section -->
<section class="top-section">
  <div class="container">
    <h1 class="top-title">Our Products</h1>
    <p class="top-subtitle">Shop Sustainable Fashion</p>
    <div class="action-buttons">
      <a href="{% url 'cart' %}" class="btn-primary">View Cart</a>
    </div>
  </div>
</section>

<!-- Welcome Section -->
<section class="section">
  <div class="container">
    <h2 class="section-title">Quality Sustainable Products</h2>
    <p class="section-description">
      Discover our collection of approved sustainable fashion items available for purchase.
      Each product has been carefully vetted by our team.
    </p>
  </div>
</section>

<!-- Available Products Section -->
<section class="products-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Available Products</h2>
      <div class="product-count">{{ products.count }} items available</div>
    </div>
    
    {% if products %}
      <div class="product-grid">
        {% for product in products %}
          <div class="product-card">
            <div class="product-image-container">
              {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.title }}" class="product-image">
              {% else %}
                <div class="no-image">No image available</div>
              {% endif %}
              <div class="product-badge">For Sale</div>
            </div>
            
            <div class="product-details">
              <h3 class="product-title">{{ product.title }}</h3>
              <p class="product-description">{{ product.description|truncatechars:100 }}</p>
              
              <div class="product-meta">
                <span class="price">${{ product.price }}</span>
                {% if product.available_size %}
                  <span class="size">Size: {{ product.available_size }}</span>
                {% endif %}
              </div>
              
              <div class="seller-info">
                <span class="seller-label">Sold by:</span>
                <span class="seller-name">{{ product.seller.username }}</span>
              </div>
              
              <button class="add-to-cart" data-product-id="{{ product.id }}">
                Add to Cart
              </button>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="no-products-message">
        <p>No approved products available at the moment.</p>
        <p>Please check back later or explore our <a href="{% url 'renting_page' %}">rental items</a>.</p>
      </div>
    {% endif %}
  </div>
</section>

{% endblock %}